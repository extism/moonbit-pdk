<!DOCTYPE html>
<html>

<head></head>

<body>
  <script type="module">
    import { configs, flush, importObject, inputString } from '/assets/simulatedExtismSdk.js'

    const wasmUnderTest = '/target/wasm/release/build/examples/http-get/http-get.wasm'

    // Next, use the official Extism JavaScript SDK:
    // Read the JS SDK docs at: https://extism.github.io/js-sdk/
    const extism = await import('https://esm.sh/@extism/extism')

    const plugin = await extism.createPlugin(
      fetch(wasmUnderTest),
      {
        useWasi: true,
        withAllowedHosts: ['*.typicode.com'],
        allowedHosts: ['*.typicode.com'],
        runInWorker: true
      }
    )

    console.log('Using official Extism JavaScript SDK...')
    let out = await plugin.call('http_get')
    console.log(out.text());
  </script>
</body>

</html>